export const meta = {
  title: 'Troubleshoot your Playwright tests and find the root cause for failing tests',
  description: "Overview of the Open Source Root Cause project which makes it easy to find the reason for failing Playwright or Puppeteer tests.",
  author: "Max Schmitt",
  date: "2020-10-12",
  tags: ["debug", "playwright", "puppeteer"],
  hidden: true
}

## Introduction

Writing end-to-end tests to guarantee the functionality of a web application will work overtime once changes get merged on e.g. GitHub is important and will result in more satisfied customers. An end-to-end test means the programmatically executed behavior of an actual user, typically executed in the cloud on headless browser instances.

This technique will often get used for finding possible bugs even before they get merged and deployed. We are focusing on this blog article on Playwright, a Node.js library which makes it possible to automate Chromium, Firefox, and WebKit with a single API.

## Debugging tests

The caveat of creating and running browser tests is that once changes are getting implemented in the actual codebase, to find the root cause of why a specific test is failing. For this scenario, [Testim](https://www.testim.io) has created a Open Source tool called [Root Cause](https://github.com/testimio/root-cause), that makes it easy to debug and analyze failures with a central interface even when they fail on the CI. It focuses on the following core needs:

- Visualize to troubleshoot - Show screenshots and highlight used elements
- Store locally or in the cloud - Analyse the results locally or on a central hosted interface
- Drill-down with data you need - View console logs or the network traffic as HAR files
- Test run reporting - Access to filter and search functionality

## Integrations

Writing tests in the JavaScript or TypeScript ecosystem is mostly done using the Jest test runner, it provides a solid foundation for finding and running tests and has integrated helper methods to assert values against expected values. The Root Cause project provides integration for common test runners like Jest and Mocha or you can use it directly without any third-party libraries. For Jest, you only have to install it with `npm install @testim/root-cause-jest` from [NPM](http://npmjs.com/package/@testim/root-cause-jest) and adjusting your main Jest configuration, for a full setup guide, see the official documentation on [help.testim.io](https://help.testim.io/docs/root-cause-jest-integration-guide).

Once it's successfully integrated you can continue as normal with Playwright. So you can interact with pages to navigate to sites, click on elements, or call your custom logic. Root Cause internally will then record it in the background to provide a first-class debug experience if they are failing.

## Managing results

The results which Root Cause is recording gets saved automatically on your disk. You can view them by running `npx root-cause ls` to list them and `npx root-cause show <result-id>` to view a selected report. This will open the interface to see all the tests which were running, stack traces if there are failing tests, and additional metadata for network traffic, pages, or console as you can see here:

<div style={{textAlign: "center", margin: "10px 0"}}>
  <video playsInline autoPlay preload="metadata" muted loop poster="/blog/troubleshoot-playwright-puppeteer-tests/screenplay-banner.jpg" style={{width: "80%", margin: "auto"}}>
    <source src="/blog/troubleshoot-playwright-puppeteer-tests/root-cause-local_new_top.mp4" type="video/mp4"/>
  Your browser does not support the video tag.
  </video>
</div>

## Root Cause Cloud

Root Cause viewer is also available as a [hosted solution](https://www.testim.io/root-cause/) which gives you the flexibility of uploading your test results from your CI provider (e.g. GitHub Actions, or Travis CI) to them and act as a central interface of your project. This automatically will analyze them if multiple are failing for the same reason or give you statistically-based insights.

## Summary

For more information see the hosted Root Cause solution on [Testim.io](https://www.testim.io/root-cause/) which can be used for free which fits for most basic use cases. They also provide an example showcase repository [on GitHub](https://github.com/testimio/root-cause-interactive-demo) which demonstrates other integrations like with Mocha.

The Open Source project is hosted on GitHub: [github.com/testimio/root-cause](https://github.com/testimio/root-cause).
